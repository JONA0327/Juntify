<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Verificaci√≥n SVG - Modal</title>
    <style>
        body { 
            background: #020617; 
            color: #e2e8f0; 
            font-family: Inter, sans-serif; 
            padding: 2rem;
        }
        .test-section {
            margin: 2rem 0;
            padding: 1rem;
            border: 1px solid #374151;
            border-radius: 0.5rem;
        }
        .svg-container {
            background: #1e293b;
            padding: 1rem;
            border-radius: 0.25rem;
            margin: 1rem 0;
        }
        .status { 
            padding: 0.5rem; 
            border-radius: 0.25rem; 
            margin: 0.5rem 0;
        }
        .status.ok { background: #059669; }
        .status.error { background: #dc2626; }
        svg { width: 24px; height: 24px; stroke: #3b82f6; }
    </style>
</head>
<body>
    <h1>üîç Verificaci√≥n de Correcciones SVG</h1>
    
    <div class="test-section">
        <h2>Test 1: SVG Problem√°tico (Antes)</h2>
        <div class="svg-container">
            <!-- SVG con error que causaba el problema -->
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 515.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 919.288 0M15 7a3 3 0 11-6 0 3 3 0 616 0zm6 3a2 2 0 11-4 0 2 2 0 414 0zM7 10a2 2 0 11-4 0 2 2 0 414 0z"></path>
            </svg>
            <span style="margin-left: 0.5rem;">SVG Problem√°tico</span>
        </div>
        <div id="svg-error-status" class="status error">‚ùå Este SVG deber√≠a causar errores en la consola</div>
    </div>

    <div class="test-section">
        <h2>Test 2: SVG Corregido (Despu√©s)</h2>
        <div class="svg-container">
            <!-- SVG corregido -->
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 01 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 01 9.288 0M15 7a3 3 0 11-6 0 3 3 0 01 6 0zm6 3a2 2 0 11-4 0 2 2 0 01 4 0zM7 10a2 2 0 11-4 0 2 2 0 01 4 0z"></path>
            </svg>
            <span style="margin-left: 0.5rem;">SVG Corregido</span>
        </div>
        <div id="svg-ok-status" class="status ok">‚úÖ Este SVG deber√≠a renderizarse sin errores</div>
    </div>

    <div class="test-section">
        <h2>Test 3: Funciones JavaScript</h2>
        <div id="js-status">Verificando...</div>
        <button onclick="testFunctions()" style="padding: 0.5rem 1rem; margin: 0.5rem 0; background: #3b82f6; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">
            Probar Funciones
        </button>
    </div>

    <div class="test-section">
        <h2>Test 4: Modal de Contexto</h2>
        <div id="modal-status">Verificando...</div>
        <button onclick="testModal()" style="padding: 0.5rem 1rem; margin: 0.5rem 0; background: #059669; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">
            Abrir Modal
        </button>
    </div>

    <script>
        // Capturar errores SVG
        window.addEventListener('error', function(e) {
            console.error('Error capturado:', e.message);
            if (e.message.includes('path') || e.message.includes('arc flag')) {
                document.getElementById('svg-error-status').innerHTML = '‚ùå Error SVG detectado: ' + e.message;
            }
        });

        // Test de funciones JavaScript
        function testFunctions() {
            const functionsToTest = [
                'updateSessionInfo',
                'openContextSelector',
                'closeContextSelector',
                'switchContextType'
            ];

            let results = '';
            functionsToTest.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    results += `‚úÖ ${funcName} - EXISTE<br>`;
                } else {
                    results += `‚ùå ${funcName} - NO EXISTE<br>`;
                }
            });

            document.getElementById('js-status').innerHTML = results;
        }

        // Test del modal
        function testModal() {
            try {
                if (typeof openContextSelector === 'function') {
                    document.getElementById('modal-status').innerHTML = '‚úÖ Funci√≥n openContextSelector encontrada';
                    console.log('üß™ Modal test: funci√≥n disponible');
                } else {
                    document.getElementById('modal-status').innerHTML = '‚ùå Funci√≥n openContextSelector NO encontrada';
                }
            } catch (error) {
                document.getElementById('modal-status').innerHTML = '‚ùå Error: ' + error.message;
            }
        }

        // Ejecutar tests autom√°ticamente
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                testFunctions();
                testModal();
            }, 1000);
        });
    </script>
</body>
</html>
